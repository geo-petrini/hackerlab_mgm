<!DOCTYPE html>
<html>
<head>
    <title>Docker Classroom Manager</title>
</head>
<body>
    <h1>Gestione Container Didattici</h1>

    <div>
        <label>Crea N container: </label>
        <input type="number" id="count" value="1">
        <button onclick="createContainers()">Crea</button>
    </div>

    <h2>Container Attivi</h2>
    <button onclick="loadList()">Aggiorna Lista</button>
    <ul id="list"></ul>

    <script>
        async function createContainers() {
            const count = document.getElementById("count").value;
            const res = await fetch("/create", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({count: parseInt(count)})
            });
            alert(await res.text());
        }

        async function loadList() {
            const res = await fetch("/list");
            const list = await res.json();
            const ul = document.getElementById("list");
            ul.innerHTML = "";

            list.forEach(c => {
                const li = document.createElement("li");
                li.innerHTML = `${c.name} - ${c.status} - Ports: ${JSON.stringify(c.ports)}
                    <button onclick="deleteContainer('${c.id}')">Elimina</button>`;
                ul.appendChild(li);
            });
        }

        async function deleteContainer(id) {
            const res = await fetch("/delete", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ids: [id]})
            });
            alert(await res.text());
            loadList();
        }
    </script>
</body>
</html>